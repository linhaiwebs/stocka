# Docker Deployment Configuration
# Copy this file to .env.docker and configure for your environment

# ===================
# Multi-Deployment Configuration
# ===================

# IMPORTANT: For multiple independent deployments on the same server
# Each deployment MUST have a unique COMPOSE_PROJECT_NAME and different ports

# Project identifier (used for container names, volumes, and networks)
# Examples: project1, project2, aistock-us, aistock-jp, etc.
# This MUST be unique for each deployment to avoid conflicts
COMPOSE_PROJECT_NAME=aistock-us-page

# Deployment name (descriptive, for reference only)
PROJECT_NAME=AI Stock Analysis - US

# ===================
# Port Configuration
# ===================
# IMPORTANT: Each deployment must use different ports
# Recommended port ranges:
#   Project 1: 7400-7401
#   Project 2: 7500-7501
#   Project 3: 7600-7601
#   Project 4: 7700-7701

# Frontend port (exposed to host)
# Default: 80 (HTTP)
# If using Cloudflare proxy, keep as 80
FRONTEND_PORT=80

# Backend port (internal, accessed via Nginx proxy)
BACKEND_PORT=3001

# ===================
# Server Configuration
# ===================

NODE_ENV=production
HOST=0.0.0.0
SERVER_SUBDOMAIN=

# ===================
# Frontend Configuration
# ===================

FRONTEND_MAIN_DOMAIN=example.com
FRONTEND_DEV_URL=http://localhost:5173

VITE_API_BASE_URL=http://backend:3001
VITE_API_SUBDOMAIN=
VITE_API_TIMEOUT=30000

VITE_DOMAIN_MAIN=example.com
VITE_DOMAIN_ADMIN=admin.example.com

VITE_ENABLE_ANALYTICS=true
VITE_ENABLE_CONVERSION_TRACKING=true

# ===================
# Database Configuration
# ===================

DATABASE_PATH=/app/data/landing_pages.db
DATABASE_BACKUP_PATH=/app/backups

# ===================
# Admin Configuration
# ===================

# Auto-create admin user on first startup (if none exists)
# These values are used during docker:deploy to create the initial admin account
# The admin will only be created if no admin users exist in the database

# Default admin username
ADMIN_USERNAME=admin

# Default admin email
ADMIN_EMAIL=admin@localhost.local

# IMPORTANT: Change this password in production!
# This password will be used to create the admin account on first startup
ADMIN_PASSWORD=your_secure_password_here

# Optional: Specify which template to use as default
# If not set, the first template will be used as default
# DEFAULT_TEMPLATE_SLUG=smartmoney-rank-default

# ===================
# Template Seeding Configuration
# ===================

# Auto-seed component code for React templates on startup
# Set to 'false' to disable automatic component code seeding
# Default: true (component code will be seeded automatically)
AUTO_SEED_COMPONENT_CODE=true

# Force re-seed component code on every startup
# Set to 'true' to update component code even if it hasn't changed
# Useful for development, keep 'false' in production for better performance
# Default: false (only seed when component code changes)
FORCE_RESEED_COMPONENT_CODE=false

# Templates directory path
# In Docker, this is where the templates folder is mounted
# Default: /app/templates (matches Docker volume mount)
TEMPLATES_DIR=/app/templates

# ===================
# Security Configuration
# ===================

# JWT Secret Key - MUST be at least 32 characters
# If left empty or invalid, the deployment script will auto-generate one
# To manually generate: openssl rand -base64 32
# IMPORTANT: Each deployment should have a unique JWT secret
JWT_SECRET=
JWT_EXPIRES_IN=8h
BCRYPT_ROUNDS=10

# ===================
# CORS Configuration
# ===================

# Admin CORS origins (comma-separated)
# Example: https://admin.example.com,https://admin2.example.com
CORS_ADMIN_ORIGINS=https://admin.example.com

# Template CORS origins (comma-separated)
# Example: https://example.com,https://www.example.com
CORS_TEMPLATE_ORIGINS=https://example.com

# ===================
# Rate Limiting Configuration
# ===================

RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_TEMPLATE_MAX=100
RATE_LIMIT_ADMIN_MAX=1000
RATE_LIMIT_PUBLIC_MAX=500

# ===================
# Cloudflare Configuration
# ===================

# If using Cloudflare proxy:
# 1. Set FRONTEND_PORT=80 (Cloudflare connects on port 80/443)
# 2. Cloudflare handles SSL automatically
# 3. Set CORS origins to your domain(s)
# 4. No need for SSL certificates on server

# ===================
# Notes
# ===================

# 1. For production, always change JWT_SECRET and ADMIN_PASSWORD
# 2. Use strong passwords (minimum 12 characters)
# 3. JWT_SECRET must be at least 32 characters
# 4. Restrict CORS origins to your actual domains in production
# 5. With Cloudflare, keep FRONTEND_PORT=80
